name: ValidaÃ§Ã£o ContÃ­nua

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main

jobs:
  validate:
    name: Validar Script
    runs-on: ubuntu-latest
    steps:
      - name: Checkout cÃ³digo
        uses: actions/checkout@v4

      - name: Instalar shellcheck
        run: sudo apt-get update && sudo apt-get install -y shellcheck

      - name: Validar sintaxe bash
        run: |
          bash -n distro.sh
          echo "âœ… Sintaxe vÃ¡lida"

      - name: AnÃ¡lise estÃ¡tica com ShellCheck
        run: |
          shellcheck -x distro.sh || true
          echo "âœ… ShellCheck concluÃ­do"

      - name: Verificar permissÃµes de execuÃ§Ã£o
        run: |
          if [ ! -x distro.sh ]; then
            echo "âš ï¸  Arquivo nÃ£o Ã© executÃ¡vel, corrigindo..."
            chmod +x distro.sh
          else
            echo "âœ… PermissÃµes corretas"
          fi

      - name: Resumo
        run: |
          echo "## âœ… ValidaÃ§Ã£o ConcluÃ­da" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "- Script: distro.sh" >> $GITHUB_STEP_SUMMARY
          echo "- Branch: ${{ github.ref_name }}" >> $GITHUB_STEP_SUMMARY
          echo "- Commit: ${{ github.sha }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "Todas as verificaÃ§Ãµes passaram! ðŸŽ‰" >> $GITHUB_STEP_SUMMARY
