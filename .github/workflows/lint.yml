name: Linter e Quality Check

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  shellcheck:
    name: ShellCheck Detalhado
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Instalar ShellCheck
        run: sudo apt-get update && sudo apt-get install -y shellcheck
      
      - name: Executar ShellCheck
        run: |
          echo "üîç Analisando distro.sh..."
          shellcheck -x -s bash distro.sh || true
          echo "‚úÖ ShellCheck conclu√≠do"

  markdown-lint:
    name: Validar Markdown
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Instalar markdownlint
        run: npm install -g markdownlint-cli
      
      - name: Lint Markdown
        run: |
          echo "üìù Validando arquivos Markdown..."
          markdownlint '**/*.md' --config .markdownlint.json || true
          echo "‚úÖ Markdown validado"
        continue-on-error: true

  basic-checks:
    name: Verifica√ß√µes B√°sicas
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Verificar sintaxe bash
        run: |
          echo "‚úÖ Verificando sintaxe do script..."
          bash -n distro.sh
          echo "‚úÖ Sintaxe v√°lida!"
      
      - name: Verificar permiss√µes
        run: |
          if [ -x distro.sh ]; then
            echo "‚úÖ Script √© execut√°vel"
          else
            echo "‚ö†Ô∏è  Script n√£o √© execut√°vel"
          fi
      
      - name: Verificar estrutura de arquivos
        run: |
          echo "üìÅ Verificando estrutura do reposit√≥rio..."
          ls -la
          echo "‚úÖ Estrutura verificada"
